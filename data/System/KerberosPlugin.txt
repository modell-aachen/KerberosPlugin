%META:TOPICINFO{author="BaseUserMapping_333" comment="reprev" date="1366618151" format="1.1" reprev="7" version="7"}%
---+!! !KerberosPlugin

Erweitert Foswikis TemplateLogin mit der Möglichkeit zur [[http://en.wikipedia.org/wiki/Kerberos_(protocol)][Kerberos]]-Anmeldung.

%TOC%

---++ Usage

Dieses Plugin bietet die Möglichkeit einer Kerberos-Anmeldung innerhalb des Wikis. Erfoderlich ist sowohl Javascript, als auch ein gepatchtes Apache Kerberos-Modul (mod_auth_kerb). Fügt ein Benutzer über ein gültiges TGT, wird dieser über Kerberos angemeldet. Andernfalls erfolgt ein Fallback auf den TemplateLogin.

---++ Installation Instructions

---+++ Apache Modul: mod_auth_kerb
   1 Den Quelltext von mod_auth_kerb, Version 5.4 von [[http://sourceforge.net/projects/modauthkerb/?source=navbar][Sourceforge]] herunterladen.
   1 [[/pup/System/KerberosPlugin/assets/mod_auth_kerb-modac.patch][Diesen]] Patch anwenden:
      * _patch -p0 &lt; mod_auth_kerb-modac.patch_
   1 Modul kompilieren und installieren
      * _./configure && make && make install_

*Hinweis: Der Patch ist für das Kerberos Modul in der Version 5.4 und Apache 2.2.x geschrieben. Für neuere Apache-Version (&gt;2.3) wird der Patch-Vorgang fehlschlagen. Grund sind Änderungen in der Apache API.*

---+++ Apache konfigurieren

Der Patch fügt zwei neue Direktiven hinzu:
   1 *KrbAnonymousLogin on|off*
      * Stanard: off
      * Schaltet den "anonymen Login" ein
   1 *KrbAnonymousUser username*
      * Standard: NULL
      * Überschreibt Apaches Remote-User.

Apache-Konfiguration anpassen:

1. Eine neue Location-Direktive hinzufügen
<pre>
# Do NOT change this directive
<Location bin=''>&lt;Location /bin/krblogin&gt;
    AuthName KrbAuth
    AuthType Kerberos
    Krb5Keytab /path/to/keytab
    KrbAuthRealms YOUR.REALM
    KrbMethodNegotiate On
    KrbMethodK5Passwd Off
    KrbAnonymousLogin Off      # &lt;--- this line is important!
    require valid-user
</Location>&lt;/Location&gt;
</pre>

2. Authentifizierungsmechanismus für Foswikis "bin"-Ordner anpassen
<pre>
&lt;Directory "/path/to/qwiki"&gt;
...
  AuthName KrbAuth
  AuthType Kerberos
  Krb5Keytab /path/to/keytab
  KrbAuthRealms YOUR.REALM
  KrbMethodNegotiate On
  KrbMethodK5Passwd Off
  KrbAnonymousLogin On
  require valid-user
...
&lt;/Directory&gt;
</pre>

---+++ Plugin Einstellungen

Die Einstellung {Plugins}{KerberosPlugin}{Realm} *muss* auf das aktuelle Authentifizierungs-Realm gesetzt werden.

---+++ Skin Einstellungen

Das KerberosPlugin kommt mit einem neuen Template, =templates/viewtopbar.kerberos.tmpl=, welches den Login-Bereich überschreibt.
<verbatim>
    * Set SKIN = kerberos,modac
</verbatim>

---++ License

[[http://www.gnu.org/licenses/old-licenses/gpl-2.0.html][GNU Public License, version 2]].

---++ Info

|  Author(s): | [[http://www.modell-aachen.de][Sven Meyer]] |
|  Copyright: | © %GMTIME{"$year"}% [[http://www.modell-aachen.de][Modell Aachen GmbH]] |
|  License: | [[http://www.gnu.org/licenses/old-licenses/gpl-2.0.html][GPL2 (Gnu General Public License v2)]] |
|  Release: | 1.0 |
|  Version: | 1001 (2013-04-02) |
|  Change History: | <!-- versions below in reverse order --> |
|  1.0 | Initial release |
|  Dependencies: | <table border="1" class="foswikiTable"> <tbody> <tr> <th> Name</th> <th> Version</th> <th> Description</th> </tr> <tr> <td align="left"> Authen::Krb5::Simple</td> <td align="left"> &gt;=0</td> <td align="left"> Required</td> </tr> <tr> <td align="left"> Foswiki::Plugins::JQueryPlugin</td> <td align="left"> &gt;=0</td> <td align="left"> Required</td> </tr> <tr> <td align="left"> Foswiki::Contrib::ModacSkin</td> <td align="left"> &gt;=0</td> <td align="left"> Optional</td> </tr> </tbody> </table> |
|  Home page: | http://www.modell-aachen.de |
|  Support: | mailto:meyer@modell-aachen.de |
<!-- Do _not_ attempt to edit this topic; it is auto-generated. -->
